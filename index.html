<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Beauty Review AI Analyzer</title>
    <style>
        body { font-family: system-ui, -apple-system, sans-serif; max-width: 500px; margin: auto; padding: 15px; background: #fff0f3; color: #333; }
        .card { background: white; padding: 20px; border-radius: 20px; box-shadow: 0 8px 20px rgba(0,0,0,0.06); margin-bottom: 20px; border-top: 6px solid #ff85a2; }
        textarea { width: 100%; height: 110px; border-radius: 12px; border: 1px solid #ddd; padding: 12px; box-sizing: border-box; font-size: 16px; outline: none; transition: 0.3s; }
        textarea:focus { border-color: #ff85a2; box-shadow: 0 0 5px rgba(255,133,162,0.3); }
        button { background: #ff85a2; color: white; border: none; padding: 14px; border-radius: 30px; cursor: pointer; font-weight: bold; width: 100%; margin-top: 10px; font-size: 16px; transition: 0.2s; }
        button:active { transform: scale(0.98); background: #f77291; }
        .clear-btn { background: #f0f0f0; color: #666; margin-top: 10px; font-size: 13px; padding: 8px; border-radius: 15px; width: 100%; border: none; cursor: pointer; }
        .neg { color: #e91e63; font-weight: bold; }
        .pos { color: #4caf50; font-weight: bold; }
        .stats { font-size: 13px; background: #fff5f7; padding: 10px; border-radius: 10px; margin-top: 10px; text-align: center; display: flex; justify-content: space-around; }
        .history-item { font-size: 14px; padding: 10px 0; border-bottom: 1px dashed #ffd1dc; }
        .tag { display: inline-block; background: #ffebee; color: #c2185b; padding: 2px 8px; border-radius: 5px; font-size: 11px; margin-right: 5px; font-weight: bold; }
    </style>
</head>
<body>
    <h2 style="text-align:center; color:#ff5c8d; margin-bottom: 5px;">üå∏ Beauty AI Analyzer</h2>
    <p style="text-align:center; font-size: 12px; color: #888; margin-bottom: 20px;">Detects Sarcasm ‚Ä¢ Damage ‚Ä¢ Authenticity</p>

    <div class="card">
        <textarea id="input" placeholder="Example: Basag yung item but amazing seller! Sayang pera..."></textarea>
        <button onclick="analyze()">Analyze Review</button>
        <button class="clear-btn" onclick="clearHistory()">üóëÔ∏è Clear History</button>
    </div>

    <div id="result" class="card" style="display:none; border-top-color: #ffb3c1; background: #fffafd;"></div>

    <div class="card">
        <h3>üìä Analytics History</h3>
        <div id="stats" class="stats">
            <span>Total: 0</span> | <span>Negatives: 0</span>
        </div>
        <div id="historyList"></div>
    </div>

<script>
    let history = JSON.parse(localStorage.getItem('beauty_data')) || [];

    function analyze() {
        const text = document.getElementById('input').value.trim();
        if(!text) return;

        let issues = [];
        
        // 1. UNIVERSAL KEYWORD DICTIONARY (Taglish)
        if(/fake|scam|peke|original|authentic|repro|amoy|smell|dilute/i.test(text)) issues.push("Authenticity");
        if(/damaged|basag|leak|tapon|broken|yupi|bukas|spill|tulo/i.test(text)) issues.push("Damage");
        if(/tigyawat|pimple|breakout|acne|burn|hapdi|itchy|kati|namula|iritasyon/i.test(text)) issues.push("Skin Reaction");
        if(/expired|expire|old|tigas|iba kulay|iba texture|panis/i.test(text)) issues.push("Quality/Exp");
        if(/matagal|bagal|late|delay|nasaan|dumating/i.test(text)) issues.push("Shipping");

        // 2. SARCASM-PROOF LOGIC
        // If issues exist, it's NEGATIVE even if they say "Good" or "Amazing"
        let sentiment = (issues.length > 0 || /worst|bad|sayang|bulok|pangit|failed/i.test(text)) ? "NEGATIVE" : "POSITIVE";
        
        const entry = {
            time: new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'}),
            text: text,
            sentiment: sentiment,
            issues: issues.length ? issues : ["General"]
        };

        history.push(entry);
        localStorage.setItem('beauty_data', JSON.stringify(history));
        render();
        document.getElementById('input').value = "";
    }

    function clearHistory() {
        if(confirm("Are you sure? This will delete all analyzed reviews.")) {
            localStorage.removeItem('beauty_data');
            history = [];
            render();
            document.getElementById('result').style.display = "none";
        }
    }

    function render() {
        const statsDiv = document.getElementById('stats');
        const historyList = document.getElementById('historyList');
        const resultDiv = document.getElementById('result');

        if(history.length === 0) {
            statsDiv.innerHTML = "No data yet.";
            historyList.innerHTML = "";
            return;
        }

        // Show Latest Result
        const last = history[history.length-1];
        resultDiv.style.display = "block";
        resultDiv.innerHTML = `
            <h4 style="margin:0 0 10px 0;">Latest Analysis: 
                <span class="${last.sentiment.toLowerCase()}">${last.sentiment}</span>
            </h4>
            <div>${last.issues.map(tag => `<span class="tag">${tag}</span>`).join('')}</div>
        `;

        // Update Stats
        const negs = history.filter(h => h.sentiment === "NEGATIVE").length;
        statsDiv.innerHTML = `<span>Total: <b>${history.length}</b></span> | <span class="neg">Negatives: <b>${negs}</b></span>`;

        // Update List
        historyList.innerHTML = history.slice().reverse().map(h => `
            <div class="history-item">
                <small style="color:#999">${h.time}</small> <b class="${h.sentiment.toLowerCase()}">[${h.sentiment}]</b><br>
                <span style="font-size:13px; color:#555;">${h.text.substring(0, 80)}${h.text.length > 80 ? '...' : ''}</span>
            </div>
        `).join('');
    }

    // Initial load
    render();
</script>
</body>
</html>
